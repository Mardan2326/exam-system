# PDF试卷模拟考试器 - 使用文档

## 📍 快速开始

### 第一步：选择AI大模型平台处理PDF

以下为推荐的国产AI大模型平台，任选其一：

#### 🌟 推荐平台列表

| 平台 | 网址 | 特点 | 推荐指数 |
|------|------|------|----------|
| **智谱AI (GLM)** | https://chatglm.cn/ | 国内领先，支持PDF解析，识别准确 | ⭐⭐⭐⭐⭐ |
| **通义千问** | https://tongyi.aliyun.com/qianwen/ | 阿里云出品，性能强劲 | ⭐⭐⭐⭐⭐ |
| **文心一言** | https://yiyan.baidu.com/ | 百度出品，中文优化 | ⭐⭐⭐⭐⭐ |
| **豆包 (Doubao)** | https://www.doubao.com/ | 字节跳动出品，速度快 | ⭐⭐⭐⭐ |
| **讯飞星火** | https://xinghuo.xfyun.cn/ | 科大讯飞，语音识别强 | ⭐⭐⭐⭐ |
| **Kimi** | https://kimi.moonshot.cn/ | 支持超长文本，适合大文件 | ⭐⭐⭐⭐ |
| **天工AI** | https://www.tiangong.cn/ | 多模态能力 | ⭐⭐⭐ |
| **腾讯元宝** | https://yuanbao.tencent.com/ | 腾讯出品，整合性好 | ⭐⭐⭐ |

#### 📝 使用步骤（以智谱AI为例）

1. 访问上述任一AI平台
2. 登录并进入对话界面
3. 上传你的PDF试卷文件（通常有“📎”或“上传”按钮）
4. **复制以下提示词**：

```
请仔细识别这个PDF文件中的所有选择题，并按照以下JSON格式输出：

基础格式（纯文本题目）：
[
  {
    "id": "1",
    "text": "题干内容",
    "options": {
      "A": "选项A的完整内容",
      "B": "选项B的完整内容", 
      "C": "选项C的完整内容",
      "D": "选项D的完整内容"
    },
    "answer": "A"
  }
]

带图格式（题干或选项包含图片时）：
[
  {
    "id": "2",
    "text": "下图所示的是什么？",
    "image": "<将图片转为base64编码，格式：data:image/jpeg;base64,/9j/4AAQ...>",
    "options": {
      "A": "选项A",
      "B": "选项B"
    },
    "answer": "A"
  },
  {
    "id": "3",
    "text": "以下哪个图形正确？",
    "options": {
      "A": {
        "text": "图形A",
        "image": "<图片base64编码>"
      },
      "B": {
        "text": "图形B",
        "image": "<图片base64编码>"
      },
      "C": "纯文本选项C",
      "D": "纯文本选项D"
    },
    "answer": "A"
  }
]

⚠️ 重要要求：
1. **必须提取所有题目**，逐页遍历，不要只返回前几道或示例！
2. 题号从1开始连续编号，确保数量完整
3. **答案处理**（非常重要）：
   - 如果PDF中有标准答案，直接提取到answer字段（A/B/C/D）
   - **如果PDF中没有答案**，你需要**根据题目内容和选项，运用你的知识判断正确答案**
   - 如果题目过于专业或你完全无法判断，才将answer设为null
   - 尽量给出答案，帮助用户学习
4. 保持题目和选项的原文，不要简化或改写
5. **图片处理**：
   - 题干包含图片：添加 "image" 字段，值为base64编码
   - 选项包含图片：将该选项改为对象 {"text": "描述", "image": "base64"}
   - 如果无法提取图片，在text中说明 "[图片]" 或描述图片内容
6. 只返回纯JSON数组，不要```json```标记，不要其他说明文字
7. 最后检查：确认题目数量是否完整（例如：PDF有85道题，JSON也必须有85条）
```

5. 点击发送，等待AI识别（通常需要30秒-2分钟）
6. **复制AI返回的完整JSON内容**
7. 保存为 `.json` 文件（如：`questions.json`）

> 💡 **小提示**：如果AI返回带有 \`\`\`json \`\`\` 标记，请删除这些标记，只保留纯JSON内容

#### 🎯 各平台使用注意事项

- **智谱AI、通义千问、文心一言**：支持PDF直接上传，识别效果好
- **Kimi**：支持超长文档（200页+），适合大型试卷
- **豆包、讯飞星火**：响应速度快，适合快速处理
- **天工AI、腾讯元宝**：支持多模态输入

> ⚠️ **重要**：不同AI平台的识别能力可能有差异，建议多尝试2-3个平台，选择效果最好的一个

### 第二步：生成模拟机考

1. 启动服务器：
   ```bash
   python simple_server.py
   ```

2. 在浏览器中打开 `Exam.html`

3. 点击"选择文件"，上传刚才保存的JSON文件

4. 点击"开始考试"

5. 开始答题！

## 💡 提示词说明

### 为什么要用这个提示词？

1. **明确JSON格式** - AI知道要输出什么结构
2. **字段完整** - id, text, options, answer 一个不少
3. **选项规范** - 强制使用A/B/C/D作为key
4. **答案处理** - 有答案就提取，没有就null
5. **纯JSON输出** - 不要markdown标记，方便解析

### JSON格式示例

#### 1. 单选题

```json
{
  "id": "1",
  "type": "single",
  "text": "中国的首都是哪里？",
  "options": {
    "A": "上海",
    "B": "北京",
    "C": "广州",
    "D": "深圳"
  },
  "answer": "B"
}
```

#### 2. 多选题

```json
{
  "id": "2",
  "type": "multiple",
  "text": "以下哪些是编程语言？（多选）",
  "options": {
    "A": "Python",
    "B": "HTML",
    "C": "Java",
    "D": "CSS"
  },
  "answer": ["A", "C"]
}
```

> ⚠️ **注意**：多选题的answer是**数组**格式，如`["A", "C"]`

#### 3. 判断题

```json
{
  "id": "3",
  "type": "judge",
  "text": "地球是太阳系中唯一有生命的星球。",
  "options": {
    "✓": "正确",
    "✗": "错误"
  },
  "answer": "✓"
}
```

> 💡 **提示**：判断题使用 `"✓"` 和 `"✗"` 作为选项键

#### 4. 带图片的题目（适用于所有题型）

**题干带图**：
```json
{
  "id": "4",
  "type": "single",
  "text": "下图所示的建筑是什么？",
  "image": "data:image/jpeg;base64,/9j/4AAQ...",
  "options": {
    "A": "天安门",
    "B": "长城"
  },
  "answer": "A"
}
```

**选项带图**：
```json
{
  "id": "5",
  "type": "single",
  "text": "以下哪个图形是正方形？",
  "options": {
    "A": {
      "text": "图形A",
      "image": "data:image/png;base64,iVBOR..."
    },
    "B": "纯文本选项B"
  },
  "answer": "A"
}
```

## ⚠️ 关键要点：题型自动识别

AI会根据PDF中的标识**自动识别**题型：

### 识别规则：

1. **多选题识别**
   - 关键词：“多选题”、“多项选择题”、“（多选）”、“[多选]”、“多项”
   - 输出：`"type": "multiple"`
   - 答案格式：数组 `["A", "C"]`

2. **判断题识别**
   - 关键词：“判断题”、“对错题”、选项为“正确/错误”、“对/错”、“√/×”、“True/False”
   - 输出：`"type": "judge"`
   - 选项格式：`{"✓": "正确", "✗": "错误"}`（统一转换）
   - 答案格式：`"✓"` 或 `"✗"`

3. **单选题识别**
   - 关键词：“单选题”或普通ABCD选项
   - 输出：`"type": "single"`（默认）
   - 答案格式：字符串 `"A"`

### 识别示例：

```
PDF内容："1. 中国的首都是？" → 识别为 single
PDF内容："2.（多选）以下哪些是..." → 识别为 multiple
PDF内容："3. 地球是圆的。（判断对错）" → 识别为 judge
PDF内容："4. 下列说法正确的是" → 识别为 single
PDF内容："5. [多项选择] 包括..." → 识别为 multiple
```

> 💡 **重要**：AI会自动识别，你无需手动标注题型！

### 1. JSON格式错误

**问题**：上传后提示"JSON格式错误"

**解决**：
- 确保复制了完整的JSON内容
- 删除AI输出中的 ```json 和 ``` 标记
- 使用 [JSON在线校验](https://www.json.cn/) 检查格式

### 2. 未找到有效题目

**问题**：上传后提示"未找到有效题目"

**解决**：
- 检查每道题是否包含 text 和 options 字段
- 确保 options 至少有2个选项
- 确保选项的key是A/B/C/D

### 3. 题目显示不完整

**问题**：某些题目没有显示

**解决**：
- 检查JSON中该题目的 text 字段是否为空
- 检查 options 是否至少有2个选项

## 🎯 优势

- ✅ **超快** - 秒级解析，无需等待OCR
- ✅ **准确** - 智谱AI识别准确率高
- ✅ **简单** - 只需上传JSON文件
- ✅ **轻量** - 不需要安装大量依赖
- ✅ **离线** - 解析过程完全本地化

## 📦 依赖

最小化依赖：
- Flask (Web服务器)
- flask-cors (跨域支持)

安装：
```bash
pip install -r requirements.txt
```

## 🔧 高级用法

### 批量处理多个PDF

1. 在智谱AI官网分别处理每个PDF
2. 合并所有JSON文件的内容（保持数组格式）
3. 上传合并后的JSON文件

### 自定义考试时长

在 `Exam.html` 中搜索 `examDuration`，修改默认值（单位：分钟）

---

**版本**: 2.0 轻量版  
**更新日期**: 2025-01-11
